# Avito Telegram Watcher
–¢–µ–ª–µ–≥—Ä–∞–º‚Äë–±–æ—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø–∞—Ä—Å–∏—Ç –≤—ã–¥–∞—á—É Avito –ø–æ –∑–∞–¥–∞–Ω–Ω–æ–º—É URL –∏ –ø—Ä–∏—Å—ã–ª–∞–µ—Ç –Ω–æ–≤—ã–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è –≤ —á–∞—Ç. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ ‚Äî —á–µ—Ä–µ–∑ –º–µ–Ω—é —Å –∏–Ω–ª–∞–π–Ω‚Äë–∫–Ω–æ–ø–∫–∞–º–∏. –ï—Å—Ç—å —É—á—ë—Ç —Å—Ä–æ–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è —Å–µ—Ä–≤–∏—Å–∞ (—Ç–∞–π–º–µ—Ä) –∏ –ø–µ—Ä–º–∞–Ω–µ–Ω—Ç–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ—Å–ª–µ –∏—Å—Ç–µ—á–µ–Ω–∏—è —Å—Ä–æ–∫–∞.

> –°–∫—Ä–∏–ø—Ç —Ä–∞—Å—Å—á–∏—Ç–∞–Ω –Ω–∞ Linux/Windows/macOS —Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º Google¬†Chrome/Chromium. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Selenium¬†4 (headless), SQLite –∏ `python-telegram-bot`¬†v20.
---
## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- üîó **–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –æ–¥–Ω–æ–π –ø–æ–∏—Å–∫–æ–≤–æ–π —Å—Å—ã–ª–∫–∏ Avito**: —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ë–î –∏ –≤ –∫–æ–Ω—Ñ–∏–≥–µ.
- ü§ñ **–¢–µ–ª–µ–≥—Ä–∞–º‚Äë–º–µ–Ω—é**: –∫–Ω–æ–ø–∫–∏ –°—Ç–∞—Ä—Ç/–°—Ç–æ–ø, –ù–∞–∑–Ω–∞—á–∏—Ç—å/–ø–æ–º–µ–Ω—è—Ç—å URL, —Å—Å—ã–ª–∫–∏ –Ω–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é/–ø–æ–¥–¥–µ—Ä–∂–∫—É.
- üÜï **–û–ø–æ–≤–µ—â–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏—è—Ö**: –∑–∞–≥–æ–ª–æ–≤–æ–∫, —Ü–µ–Ω–∞, –≥–æ—Ä–æ–¥, —Å—Å—ã–ª–∫–∞, –∏ (–ø–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏) –æ–±–ª–æ–∂–∫–∞.
- ‚è≥ **–°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è**: –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç—Å—è –¥–∞—Ç–∞ –∏—Å—Ç–µ—á–µ–Ω–∏—è (`days`). –ü–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ ‚Äî –ø–∞—Ä—Å–µ—Ä –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∏ –Ω–∞–≤—Å–µ–≥–¥–∞ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è.
- ‚öôÔ∏è **–ü—Ä–æ–∫—Å–∏**: –ø–æ–¥–¥–µ—Ä–∂–∫–∞ `http`, `https`, `socks5` (—Å –ª–æ–≥–∏–Ω–æ–º/–ø–∞—Ä–æ–ª–µ–º).
- üß† **–ü–∞–º—è—Ç—å**: –∏—Å—Ç–æ—Ä–∏—è —É–≤–∏–¥–µ–Ω–Ω—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ SQLite —á—Ç–æ–±—ã –Ω–µ —Å–ª–∞—Ç—å –¥—É–±–ª–∏–∫–∞—Ç—ã.
- üë§ **–ü—Ä–∏–≤—è–∑–∫–∞ –∫ –æ–¥–Ω–æ–º—É —á–∞—Ç—É**: –ø–µ—Ä–≤—ã–π /start —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç `chat_id`.

---
### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```bash
pip install python-telegram-bot==20.* selenium==4.*
```

> –í Linux –º–æ–∂–µ—Ç –ø–æ–Ω–∞–¥–æ–±–∏—Ç—å—Å—è `apt install -y chromium-driver` –∏–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ Google¬†Chrome. –ü—Ä–∏ headless‚Äë—Ä–µ–∂–∏–º–µ –¥–æ–±–∞–≤—å—Ç–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Ñ–ª–∞–≥–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω–æ–π —Å—Ä–µ–¥—ã.

---
## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
1. –°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ –≤ @BotFather –∏ –ø–æ–ª—É—á–∏—Ç–µ **Bot API Token**.
2. –ü–æ–¥–≥–æ—Ç–æ–≤—å—Ç–µ –ø—É—Å—Ç—É—é SQLite‚Äë–±–∞–∑—É (—Ñ–∞–π–ª –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏), –Ω–∞–ø—Ä–∏–º–µ—Ä `data/avito.db`.
3. –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ (–∑–∞–ø–æ–ª–Ω—è–µ—Ç –∫–æ–Ω—Ñ–∏–≥ `bot.config.json`):

```bash
python avito.py \
  --token 1234567890:AA... \
  --db /abs/path/to/data/avito.db \
  --days 30 \
  --proxy socks5://user:pass@host:1080 \
  --interval 5 \
  --max-items 5 \
  --profile-path "$HOME/.config/google-chrome/Default"
```

–ü–∞—Ä–∞–º–µ—Ç—Ä—ã `--proxy`, `--interval`, `--max-items`, `--profile-path` ‚Äî –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã.
4. –û—Ç–∫—Ä–æ–π—Ç–µ —á–∞—Ç —Å –±–æ—Ç–æ–º –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ `/start`.
5. –ù–∞–∂–º–∏—Ç–µ ¬´üîó –ù–∞–∑–Ω–∞—á–∏—Ç—å/–ø–æ–º–µ–Ω—è—Ç—å URL¬ª –∏ –ø—Ä–∏—à–ª–∏—Ç–µ **–æ–¥–Ω—É —Å—Å—ã–ª–∫—É Avito** (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤—ã–¥–∞—á–∞ –ø–æ–∏—Å–∫–∞/—Ñ–∏–ª—å—Ç—Ä–∞).
6. –ù–∞–∂–º–∏—Ç–µ ¬´‚ñ∂Ô∏è –°—Ç–∞—Ä—Ç¬ª ‚Äî –±–æ—Ç –Ω–∞—á–Ω—ë—Ç –ø—Ä–∏—Å—ã–ª–∞—Ç—å –Ω–æ–≤—ã–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è.

–î–∞–ª—å–Ω–µ–π—à–∏–µ –∑–∞–ø—É—Å–∫–∏ –º–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å **–±–µ–∑ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤** ‚Äî –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤–æ–∑—å–º—É—Ç—Å—è –∏–∑ `bot.config.json`.

---

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–ü–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ —Å–æ–∑–¥–∞—ë—Ç—Å—è `bot.config.json` —Ä—è–¥–æ–º —Å–æ —Å–∫—Ä–∏–ø—Ç–æ–º:

```json
{
  "token": "123456:ABC...",
  "db": "/abs/path/to/data/avito.db",
  "days": 30,
  "proxy": "socks5://user:pass@host:1080",
  "interval": 5,
  "max_items": 5,
  "profile_path": "/home/user/.config/google-chrome/Default"
}
```

–ò–∑–º–µ–Ω–µ–Ω–∏—è –º–æ–∂–Ω–æ –≤–Ω–æ—Å–∏—Ç—å —Ä—É–∫–∞–º–∏ –∏–ª–∏ —á–µ—Ä–µ–∑ –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–ø—É—Å–∫ —Å —Ñ–ª–∞–≥–∞–º–∏ ‚Äî —Å–∫—Ä–∏–ø—Ç –æ–±–Ω–æ–≤–∏—Ç —Ñ–∞–π–ª.

---
## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç
1. –ü—Ä–∏ `/start` –±–æ—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç **–º–µ–Ω—é —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è**:
    - ¬´‚ñ∂Ô∏è –°—Ç–∞—Ä—Ç / ‚èπ –°—Ç–æ–ø¬ª ‚Äî –∑–∞–ø—É—Å–∫/–æ—Å—Ç–∞–Ω–æ–≤ –ø–∞—Ä—Å–µ—Ä–∞
    - ¬´üîó –ù–∞–∑–Ω–∞—á–∏—Ç—å/–ø–æ–º–µ–Ω—è—Ç—å URL¬ª ‚Äî –æ–∂–∏–¥–∞–µ—Ç –æ–¥–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å —Å—Å—ã–ª–∫–æ–π
    - ¬´üìò –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è¬ª –∏ ¬´üë®‚Äçüíª –¢–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∞¬ª ‚Äî URL‚Äë–∫–Ω–æ–ø–∫–∏ (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞–º–∏)
2. –í —Å—Ç–∞—Ç—É—Å–µ –º–µ–Ω—é –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è:
    - –¢–µ–∫—É—â–∏–π URL (–∫–∞–∫ –∫–ª–∏–∫–∞–±–µ–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞)
    - –¢–∞–π–º–µ—Ä –≤—Ä–µ–º–µ–Ω–∏ –¥–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è
    - –°—Ç–∞—Ç—É—Å –ø–∞—Ä—Å–µ—Ä–∞ (—Ä–∞–±–æ—Ç–∞–µ—Ç/–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
3. –ü–∞—Ä—Å–µ—Ä –≤ —Ü–∏–∫–ª–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É Avito (headless), –±–µ—Ä—ë—Ç –¥–æ `max_items` –∫–∞—Ä—Ç–æ—á–µ–∫ –∏ –¥–ª—è –∫–∞–∂–¥–æ–π –Ω–æ–≤–æ–π (`ads` –≤ –ë–î –Ω–µ—Ç) —à–ª—ë—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ —á–∞—Ç.
    
4. Watchdog –∫–∞–∂–¥—ã–µ 30¬†—Å–µ–∫ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—Ä–æ–∫. –ö–æ–≥–¥–∞ –≤—Ä–µ–º—è –≤—ã—à–ª–æ:
    - –ü–∞—Ä—Å–µ—Ä –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è,
    - –í –ë–î —Å—Ç–∞–≤–∏—Ç—Å—è —Ñ–ª–∞–≥ –≤–µ—á–Ω–æ–π –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏,
    - –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –±–æ–ª—å—à–µ –Ω–µ–≤–æ–∑–º–æ–∂–µ–Ω (—Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ).

--
